{"version":3,"file":"shapesvg.min.js","sources":["../src/consts.ts","../src/index.ts"],"sourcesContent":["export const TOP = \"top\";\nexport const BOTTOM = \"bottom\";\nexport const LEFT = \"left\";\nexport const RIGHT = \"right\";\nexport type DIRECTION = \"top\" | \"bottom\" | \"left\" | \"right\";\nexport type STROKE_LINEJOIN = \"bevel\" | \"round\" | \"miter\" | \"miter-clip\" | \"arcs\";\nexport const CLASS_NAME = \"__shape-svg\";\n","import { CLASS_NAME, STROKE_LINEJOIN } from \"./consts\";\n\ninterface SVGInterface {\n  left?: number;\n  top?: number;\n  right?: number;\n  bottom?: number;\n  side?: number;\n  split?: number;\n  width?: number;\n  height?: number;\n  strokeWidth?: number;\n  strokeLinejoin?: STROKE_LINEJOIN;\n  innerRadius?: number;\n  [key: string]: any;\n}\n\nfunction makeDOM(tag: string) {\n  return document.createElementNS(\"http://www.w3.org/2000/svg\", tag);\n}\nfunction makeSVGDOM() {\n  const el = makeDOM(\"svg\");\n\n  el.setAttribute(\"class\", CLASS_NAME);\n  return el;\n}\nexport function getRect({\n  side = 3,\n  rotate = 0,\n  innerRadius = 100,\n  width = 0,\n  height = 0,\n  strokeLinejoin = \"round\",\n  strokeWidth = 0,\n}: SVGInterface) {\n  let xPoints: number[] = [];\n  let yPoints: number[] = [];\n  const sideCos = Math.cos(Math.PI / side);\n  const startRad = Math.PI / 180 * rotate +  Math.PI * ((side % 2 ? 0 : 1 / side) - 1 / 2);\n\n  for (let i = 0; i < side; ++i) {\n    const rad = Math.PI * (1 / side * 2 * i) + startRad;\n    const cos = Math.cos(rad);\n    const sin = Math.sin(rad);\n\n    xPoints.push(cos);\n    yPoints.push(sin);\n    if (innerRadius !== 100) {\n      if (sideCos <= innerRadius / 100) {\n        continue;\n      } else {\n        xPoints.push(innerRadius / 100 * Math.cos(rad + Math.PI / side));\n        yPoints.push(innerRadius / 100 * Math.sin(rad + Math.PI / side));\n      }\n    }\n  }\n  const minX = Math.min(...xPoints);\n  const minY = Math.min(...yPoints);\n  const maxX = Math.max(...xPoints);\n  const maxY = Math.max(...yPoints);\n  const isWidth = !!width;\n  const scale = isWidth ? width / (maxX - minX) : height / (maxY - minY);\n  const isOuter = strokeLinejoin === \"miter\" || strokeLinejoin === \"arcs\" || strokeLinejoin === \"miter-clip\";\n  const innerCos = Math.min(sideCos, innerRadius / 100);\n  const innerScale = scale * innerCos;\n  const outerScale = isOuter ? (innerScale + strokeWidth / 2 / (1 - innerCos * innerCos)) / innerScale : 1;\n  const pos = isOuter ? 0 : strokeWidth / 2;\n\n  xPoints = xPoints.map(xp => (xp - minX * outerScale) * scale + pos);\n  yPoints = yPoints.map(yp => (yp - minY * outerScale) * scale + pos);\n\n  const polygonWidth = (maxX - minX) * outerScale * scale + pos * 2;\n  const polygonHeight = (maxY - minY) * outerScale * scale + pos * 2;\n  const points = xPoints.map((xp, i) => [xp, yPoints[i]]);\n  return {points, width: polygonWidth, height: polygonHeight};\n}\nexport function star({\n  side = 3,\n  innerRadius = 60 * Math.cos(Math.PI / side),\n}: SVGInterface,     container?: SVGAElement) {\n  return poly({...arguments[0], innerRadius}, container);\n}\nexport function poly({\n  left = 0,\n  top = 0,\n  right = 0,\n  bottom = 0,\n  strokeWidth,\n  strokeLinejoin = \"round\",\n  fill = \"transparent\",\n  side,\n  width,\n  height,\n  rotate,\n  innerRadius = 100,\n  ...attributes\n}: SVGInterface,     container: SVGElement = makeSVGDOM()) {\n  const {points, width: polygonWidth, height: polygonHeight } =\n    getRect({side, rotate, width, height, innerRadius, strokeLinejoin, strokeWidth});\n\n  const polygon: SVGPolygonElement = makeDOM(\"polygon\") as SVGPolygonElement;\n\n  if (container.getAttribute(\"class\") === CLASS_NAME) {\n    container.setAttribute(\"viewBox\", `0 0 ${left + polygonWidth + right} ${top + polygonHeight + bottom}`);\n  }\n  polygon.setAttribute(\"fill\", fill);\n  polygon.setAttribute(\"stroke-linejoin\", strokeLinejoin);\n  polygon.setAttribute(\"stroke-width\", `${strokeWidth}`);\n  polygon.setAttribute(\"points\", points.map(point => `${left + point[0]},${top + point[1]}`).join(\" \"));\n\n  for (const name in attributes) {\n    polygon.setAttribute(name, attributes[name]);\n  }\n  container.appendChild(polygon);\n  return container;\n}\nexport const VERSION = \"#__VERSION__#\";\n"],"names":["CLASS_NAME","makeDOM","tag","document","createElementNS","getRect","_a","_b","side","_c","rotate","_d","innerRadius","_e","width","_f","height","_g","strokeLinejoin","_h","strokeWidth","xPoints","yPoints","sideCos","Math","cos","PI","startRad","i","rad","sin","push","minX","min","minY","maxX","max","maxY","scale","isOuter","innerCos","innerScale","outerScale","pos","map","xp","yp","polygonWidth","polygonHeight","points","poly","container","el","setAttribute","left","top","right","bottom","fill","attributes","_j","polygon","name","getAttribute","point","join","appendChild"],"mappings":"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"}